# AUTO-GENERATED BY tox2travis.py -- DO NOT EDIT THIS FILE BY HAND!

sudo: false
language: python

cache: pip

matrix:
  include:
    - python: pypy
      env: TOX_ENV=pypy-twisted_lowest-pyopenssl_lowest
    - python: pypy
      env: TOX_ENV=pypy-twisted_lowest-pyopenssl_latest
    - python: pypy
      env: TOX_ENV=pypy-twisted_latest-pyopenssl_lowest
    - python: pypy
      env: TOX_ENV=pypy-twisted_latest-pyopenssl_latest
    - python: '2.7'
      env: TOX_ENV=py27-twisted_lowest-pyopenssl_lowest
    - python: '2.7'
      env: TOX_ENV=py27-twisted_lowest-pyopenssl_latest
    - python: '2.7'
      env: TOX_ENV=py27-twisted_latest-pyopenssl_lowest
    - python: '2.7'
      env: TOX_ENV=py27-twisted_latest-pyopenssl_latest
    - python: '3.3'
      env: TOX_ENV=py33-twisted_lowest-pyopenssl_lowest
    - python: '3.3'
      env: TOX_ENV=py33-twisted_lowest-pyopenssl_latest
    - python: '3.3'
      env: TOX_ENV=py33-twisted_latest-pyopenssl_lowest
    - python: '3.3'
      env: TOX_ENV=py33-twisted_latest-pyopenssl_latest
    - python: '3.4'
      env: TOX_ENV=py34-twisted_lowest-pyopenssl_lowest
    - python: '3.4'
      env: TOX_ENV=py34-twisted_lowest-pyopenssl_latest
    - python: '3.4'
      env: TOX_ENV=py34-twisted_latest-pyopenssl_lowest
    - python: '3.4'
      env: TOX_ENV=py34-twisted_latest-pyopenssl_latest
    - python: '3.5'
      env: TOX_ENV=py35-twisted_lowest-pyopenssl_lowest
    - python: '3.5'
      env: TOX_ENV=py35-twisted_lowest-pyopenssl_latest
    - python: '3.5'
      env: TOX_ENV=py35-twisted_latest-pyopenssl_lowest
    - python: '3.5'
      env: TOX_ENV=py35-twisted_latest-pyopenssl_latest
    - python: pypy
      env: TOX_ENV=pypy-twisted_trunk-pyopenssl_trunk
    - python: '2.7'
      env: TOX_ENV=py27-twisted_trunk-pyopenssl_trunk
    - python: '3.3'
      env: TOX_ENV=py33-twisted_trunk-pyopenssl_trunk
    - python: '3.4'
      env: TOX_ENV=py34-twisted_trunk-pyopenssl_trunk
    - python: '3.5'
      env: TOX_ENV=py35-twisted_trunk-pyopenssl_trunk
    - python: '2.7'
      env: TOX_ENV=pypi-readme
    - python: '2.7'
      env: TOX_ENV=check-manifest
    - python: '2.7'
      env: TOX_ENV=flake8

  # Don't fail on trunk versions.
  allow_failures:
    - env: TOX_ENV=pypy-twisted_trunk-pyopenssl_trunk
    - env: TOX_ENV=py27-twisted_trunk-pyopenssl_trunk
    - env: TOX_ENV=py33-twisted_trunk-pyopenssl_trunk
    - env: TOX_ENV=py34-twisted_trunk-pyopenssl_trunk
    - env: TOX_ENV=py35-twisted_trunk-pyopenssl_trunk

before_install:
  - |
    if [[ "${TOX_ENV::5}" == "pypy-" ]]; then
      PYENV_ROOT="$HOME/.pyenv"
      git clone --depth 1 https://github.com/yyuu/pyenv.git "$PYENV_ROOT"
      PATH="$PYENV_ROOT/bin:$PATH"
      eval "$(pyenv init -)"
      pyenv install pypy-5.4.1
      pyenv global pypy-5.4.1
    fi
  - pip install --upgrade pip

install:
  - pip install tox codecov

script:
  - tox -e $TOX_ENV

after_success:
  - codecov

notifications:
  email: false

# branches:
#   only:
#     - master

# AUTO-GENERATED BY tox2travis.py -- DO NOT EDIT THIS FILE BY HAND!
